% lt_basics.sty
% Sam Harrison 2018
% MIT License: a full version of the license is included in the LICENSE file.

% For TeXShop, TeXWorks, etc
% !TEX encoding = UTF-8 Unicode
% !TEX spellcheck = en-GB

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Package info {{{

% http://en.wikibooks.org/wiki/LaTeX/Modular_Documents
% http://en.wikibooks.org/wiki/LaTeX/Creating_Packages
% http://www.latex-project.org/guides/clsguide.pdf

% Requires at least LaTeX version 2e.
\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{lt_basics}[2018/08/29 Custom LuaTeX style]

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Localisation {{{

% Language support
\RequirePackage[british]{babel}

% Quotes conforming to regional conventions
\RequirePackage{csquotes}   % \enquote{Quoted text}

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Fonts {{{

% http://www.tug.dk/FontCatalogue/
% https://math.ucsd.edu/~msharpe/RecentTexFonts.pdf
% http://typographica.org

% Load some new fonts!
\RequirePackage[no-math]{fontspec}      % Let unicode-math deal with maths
    \defaultfontfeatures{Ligatures=TeX, Numbers=Proportional}
    % Alternatives: {Numbers=Lowercase}

    \setmainfont{libertinusserif}[      % Family name: Libertinus Serif
        Extension      = .otf,
        UprightFont    = *-regular,
        ItalicFont     = *-italic,
        BoldFont       = *-semibold,
        BoldItalicFont = *-semibolditalic]
    % Alternatives: STIX Two Text [STIX Two Math], TeX Gyre Schola [TeX Gyre Schola Math]
    % Without maths: Cochineal, Garamond (see below), Junicode

    % garamondx requires the getnonfreefonts script (see README.md)
    % But in Type1 format so can't load via fontspec
    %\RequirePackage[full]{textcomp}
    %\RequirePackage[swashQ]{garamondx} % Old style figures, fancy Q
    % https://github.com/octaviopardo/EBGaramond12

    \setsansfont{Lato}[
        BoldFont={Lato-Semibold.ttf},
        BoldItalicFont={Lato-SemiboldItalic.ttf},
        Scale=MatchUppercase]
    % Alternatives: IBM Plex Sans, Linux Biolinum O, Rosario, URW Classico

    \setmonofont{Inconsolatazi4}[
        Scale=MatchLowercase]
    % Alternatives: Droid Sans Mono, Source Code Pro

% Finding the font files / family name can be tricky. Try e.g.
% ls "$(kpsexpand '$TEXMFDIST')/fonts/opentype"
% otfinfo -i <path/to/font_file.otf>

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Typography {{{

\RequirePackage{microtype}  % Making typesetting even better!

\RequirePackage{setspace}   % Inter-line spacing
    % \singlespacing \onehalfspacing \doublespacing

\RequirePackage[strict]{changepage}
% Includes command to change the margins for a short section
% \begin{adjustwidth}{<leftindent>}{<rightindent>}
%    ...
% \end{adjustwidth}
% https://texfaq.org/FAQ-chngmargonfly

\RequirePackage[normalem]{ulem} % Underlining etc: \uline{}, \sout{}

\RequirePackage{metalogo}   % \LuaLaTeX etc

\RequirePackage{siunitx}    % Proper typesetting of numbers and units
\sisetup{
    detect-all,                 % Detect text v maths, font weight, shape etc
    binary-units=true,          % \bit and \byte; \kibi, \mebi, etc
    group-digits = integer,     % Only group before decimal point
    group-separator = {,},
    group-minimum-digits = 4    % Group e.g. 1,500
}

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Colours {{{

\RequirePackage[x11names]{xcolor}

% Some useful extra colours
\definecolor{CambridgeBlue}{RGB}{163,193,173}
\definecolor{OxfordBlue}{RGB}{0,33,71}

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Customising enumerate, itemize etc {{{

\RequirePackage{enumitem}
    % Set global options
    \setlist{
        labelindent=\parindent, % Labels aligned with para indent
        leftmargin=*,           % Adjust left margin based on label size
        rightmargin=\parindent, % Make narrower on RHS for balance
        font=\sffamily}         % Labels have different font

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Useful extra commands {{{

% \eg, \ie and \etc to deal with spacing
% https://tex.stackexchange.com/a/15017
% https://tex.stackexchange.com/a/2230
% You should consider \@. a "sentence-ending period" and .\@ an
% "abbreviation period"
\usepackage{xspace}
\newcommand*{\eg}{e.g.\@\xspace}
\newcommand*{\ie}{i.e.\@\xspace}
\newcommand*{\cf}{cf.\@\xspace}
\newcommand*{\etc}{%
    \@ifnextchar{.}%
        {etc}%
        {etc.\@\xspace}%
}

% Command for a quote environment with an author
%\begin{aquote}{Author}
%     ...
%\end{aquote}
% https://tex.stackexchange.com/a/13761
% More in depth description on page 106 of the TeXbook
\newcommand{\signed}[1]{
    \leavevmode\unskip
    \nobreak\hfil\penalty50\hskip2em\hbox{}\nobreak\hfil #1
    \parfillskip=0pt \finalhyphendemerits=0 \endgraf}
% Have to save argument - not passed to \end{}
% https://tex.stackexchange.com/q/17036
% Note also have to format before saving - not sure why
\newenvironment{aquote}[1]
    {\newsavebox{\authorbox} \savebox{\authorbox}{\textit{#1}} \begin{quote}}
    {\signed{\usebox{\authorbox}} \end{quote}}

% }}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
